{% if section.settings.text != blank %}
  <div
    x-data="{ shown: false }"
    x-init="$watch('shown', (value) => $dispatch('announcement-bar:visible', value))"
    x-intersect="shown = true"
    x-intersect:leave="shown = false"
    id="announcement_bar"
    class="bg-gray-100 relative z-10 h-10 flex items-center justify-center px-4"
  >
    {{ section.settings.text }}
  </div>
{% endif %}

{% stylesheet %}
  body {
    --announcement-bar-height: 0rem;
  }

  body:has(#announcement_bar) {
    --announcement-bar-height: 2.5rem;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Announcement bar",
  "enabled_on": {
    "groups": ["header"]
  },
  "settings": [
    {
      "type": "text",
      "id": "text",
      "label": "Text",
      "default": "Announcement"
    }
  ],
  "presets": [
    {
      "name": "Announcement bar"
    }
  ]
}
{% endschema %}
